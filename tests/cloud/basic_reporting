#!/usr/bin/env expect-lite

? $test_in_progress != 1 ? ~tests/connect.inc

##-------------------------------------------------------------------##

$test_in_progress=1
~tests/cloud/cloud_check
$test_in_progress=0

>podrec $EL_pod logs/$EL_testname.json
<"StatusCode": 200

##------------------------------------------------------------------##

#; ============ $EL_testname: Verify battery e.g. "5.67" ============
#>cat logs/$EL_testname.json | jo -a -p | fgrep sizeGal | awk '{print $2}'
#<$EL_gallons,

##------------------------------------------------------------------##

#; ============ $EL_testname: Verify time e.g. "UTC time: 17:53:47" ============
#>cat logs/$EL_testname.json | jo -a -p | fgrep sizeGal | awk '{print $2}'
#<$EL_gallons,

##------------------------------------------------------------------##

#; ============ $EL_testname: Verify date e.g. "UTC date: 2018/10/02" ============
#>cat logs/$EL_testname.json | jo -a -p | fgrep sizeGal | awk '{print $2}'
#<$EL_gallons,

##------------------------------------------------------------------##

; ============ $EL_testname: Verify fw version "$EL_fw_version" ============
>cat logs/$EL_testname.json | jo -a -p | fgrep sizeGal | awk '{print $2}'
<$EL_gallons,

##------------------------------------------------------------------##

; ============ $EL_testname: Verify BLE version "$EL_fw_bleversion" ============
>cat logs/$EL_testname.json | jo -a -p | fgrep sizeGal | awk '{print $2}'
<$EL_gallons,

##------------------------------------------------------------------##

? $test_in_progress != 1 ? ~tests/cleanup.inc
